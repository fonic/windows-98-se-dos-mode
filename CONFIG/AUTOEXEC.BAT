@ECHO OFF

REM Configuration options
SET PATH=%PATH%;C:\TOOLS
SET CODEPAGE=437
SET KEYBOARD=us
REM SET CPUIDLE=DOSIDLE
SET CPUIDLE=FDAPM
REM SET FDAPM=APMDOS
SET FDAPM=ADV:REG

:COMMON
IF "%CPUIDLE%" == "DOSIDLE" LH C:\TOOLS\DOSIDLE.EXE >NUL
IF "%CPUIDLE%" == "FDAPM" LH C:\TOOLS\FDAPM.COM %FDAPM% >NUL
LH MODE.COM con codepage prepare=((%CODEPAGE%) C:\WINDOWS\COMMAND\EGA.CPI) >NUL
LH MODE.COM con codepage select=%CODEPAGE% >NUL
LH KEYB.COM %KEYBOARD%,,C:\WINDOWS\COMMAND\KEYBOARD.SYS >NUL
LH C:\WINDOWS\COMMAND\DOSKEY.COM >NUL
REM CTMOUSE will automatically load itself high
C:\TOOLS\CTMOUSE.EXE >NUL
GOTO %CONFIG%

:WINDOWS
CLS
WIN.COM
GOTO EXIT

:DOS
GOTO EXIT

:DOSCD
REM Using SHSUCDX.COM instead which has a much smaller memory footprint,
REM leaving this here for future reference
REM LH C:\WINDOWS\COMMAND\MSCDEX.EXE /D:MSCD001
REM C:\WINDOWS\COMMAND\MSCDEX.EXE /D:MSCD001
REM SHSUCDX.COM will automatically load itself high, using LH will even
REM prevent that!
C:\TOOLS\SHSUCDX.COM /D:MSCD001 >NUL
GOTO EXIT

:EXIT
